# 配置系统总览

## 📂 配置目录结构

```
config/
├── README.md                 # 本说明文档
├── QUICKSTART.md             # 快速入门指南 ⭐
├── index.ts                  # 统一导出入口
├── types.ts                  # 全局类型定义
│
├── site/                     # 站点配置 🌐
│   ├── README.md             # 站点配置说明
│   ├── index.ts              # 站点配置导出
│   ├── site.ts               # 基本信息（名称、域名、Logo等）
│   ├── theme.ts              # 主题样式（颜色、字体、布局等）
│   ├── locales.ts            # 多语言配置
│   └── modules.ts            # 模块功能配置
│
├── api/                      # API配置 🔌
│   ├── README.md             # API配置说明
│   ├── index.ts              # API配置导出
│   └── backend.ts            # 后端接口配置
│
└── pages/                    # 页面配置 📄
    ├── README.md             # 页面配置说明
    ├── index.ts              # 页面配置导出
    ├── home.ts               # 首页配置 (/)
    ├── home/                 # 首页模块化配置
    │   ├── types.ts          # 首页类型定义
    │   ├── schema.ts         # 首页数据Schema
    │   └── index.ts          # 首页配置导出
    ├── strategy.ts           # 攻略页 (/strategy)
    ├── special.ts            # 特惠游戏 (/special)
    ├── articles.ts           # 资讯 (/articles)
    ├── games.ts              # 游戏 (/games)
    ├── boxes.ts              # 盒子配置 (/boxes)
    ├── boxes/                # 盒子模块化配置
    │   └── schema.ts         # 盒子数据Schema
    ├── detail.ts             # 详情页配置
    ├── article/              # 文章详情模块化配置
    │   └── schema.ts         # 文章详情数据Schema
    └── search.ts             # 搜索页
```

## 🎯 配置分类

### 1. 站点配置 (`site/`) 🌐

**用途：** 全站通用的基础配置

**包含文件：**
- `site.ts` - 网站名称、描述、Logo、版权信息等
- `theme.ts` - 颜色、字体、布局、动画等样式配置
- `locales.ts` - 多语言支持配置
- `modules.ts` - 功能模块配置

**修改频率：** 低（项目初始化后很少改动）

**详细文档：** [site/README.md](./site/README.md)

**使用示例:**
```typescript
import { siteConfig, themeConfig } from '@/config'

console.log(siteConfig.name)        // 网站名称
console.log(themeConfig.colors)     // 主题颜色
```

### 2. API配置 (`api/`) 🔌

**用途：** 后端接口配置

**包含文件：**
- `backend.ts` - API地址、端点、请求头等

**修改频率：** 中（环境切换时需要修改）

**详细文档：** [api/README.md](./api/README.md)

**示例:**
```typescript
import { getApiUrl } from '@/config'

const url = getApiUrl('articles')
```

### 4. 多语言配置

**文件:** `locales.ts`

**用途:** 国际化配置

**包含:**
- 支持的语言列表
- 默认语言
- 语言切换逻辑

**修改频率:** 低（语言支持范围确定后）

### 5. 模块配置

**文件:** `modules.ts`

**使用示例:**
```typescript
import { getApiUrl } from '@/config'

const url = getApiUrl('articles')  // 获取文章接口URL
```

### 3. 页面配置 (`pages/`) 📄

**用途：** 各页面的UI配置

**包含文件：**
- `home.ts` + `home/` - 首页配置和模块（Hero、统计、区块、Schema）
- `strategy.ts` - 攻略列表页
- `special.ts` - 特惠游戏列表页
- `articles.ts` - 资讯列表页
- `games.ts` - 游戏列表页
- `boxes.ts` + `boxes/` - 盒子配置和模块（Schema）
- `detail.ts` + `article/` - 详情页配置和模块（侧边栏、目录、分享、Schema）
- `search.ts` - 搜索页

**修改频率：** 高（运营需要经常调整文案和布局）

**详细文档：** [pages/README.md](./pages/README.md) ⭐
  }
}
```

### 3. 在页面中使用配置

```typescript
// app/page.tsx
import { siteConfig, getHomePageConfig } from '@/config'

export default async function Page() {
  const config = await getHomePageConfig()
  
  return (
    <div>
      <h1>{siteConfig.name}</h1>
      <p>{config.hero.title}</p>
    </div>
  )
}
```

## 📖 配置优先级

1. **后端API配置** (最高优先级)
   - 从后端实时获取
   - 支持动态修改
   - 适合生产环境

2. **本地配置文件**
   - 代码中定义
   - 作为默认值
   - 适合开发环境

3. **环境变量**
   - `.env` 文件
   - 用于敏感信息
   - 不同环境不同值

## 🎨 配置最佳实践

### 1. 配置分层原则

- **站点配置** (`site/`): 全局、通用、长期不变的配置
- **API配置** (`api/`): 接口相关配置，按环境切换
- **页面配置** (`pages/`): 页面级配置，运营经常调整

### 2. 目录组织原则

- **按功能分类**: 相关配置放在同一子目录
- **独立导出**: 每个子目录有自己的 index.ts
- **文档齐全**: 每个子目录有 README 说明

### 3. 类型安全

- 所有配置必须有 TypeScript 类型定义
- 使用 `as const` 确保字面量类型
- 导出类型供组件使用

### 3. 默认值

- 提供合理的默认配置
- API 失败时回退到默认配置
- 可选字段使用 `?` 标记

### 4. 文档完善

- 每个配置项添加注释说明
- 提供使用示例
- 说明修改影响范围

## 🔧 高级用法

### 1. 配置合并

```typescript
const config = {
  ...defaultConfig,
  ...apiConfig,
  ...customConfig
}
```

### 2. 条件配置

```typescript
const config = isDevelopment 
  ? devConfig 
  : prodConfig
```

### 3. 动态配置

```typescript
export async function getConfig() {
  const response = await fetch('/api/config')
  return response.json()
}
```

### 4. 配置验证

```typescript
import { z } from 'zod'

const ConfigSchema = z.object({
  title: z.string(),
  description: z.string(),
})

ConfigSchema.parse(config)
```

## 📋 配置清单

启动新项目时需要修改的配置：

- [ ] `site/site.ts` - 网站名称、域名、Logo
- [ ] `api/backend.ts` - API地址
- [ ] `pages/home.ts` - 首页内容
- [ ] `site/theme.ts` - 主题颜色（可选）
- [ ] `.env` - 环境变量

## 📚 详细文档

- 📖 [快速入门指南](./QUICKSTART.md) - 5分钟快速配置 ⭐
- 📖 [站点配置说明](./site/README.md) - 站点、主题、多语言配置
- 📖 [API配置说明](./api/README.md) - 后端接口配置
- 📖 [页面配置说明](./pages/README.md) - 各页面UI配置 ⭐

## 🔍 配置查找指南

**想修改什么？**查看哪个文件？**

| 修改内容 | 配置文件 | 目录 |
|---------|---------|------|
| 网站名称、Logo | `site/site.ts` | `site/` |
| 主题颜色、字体 | `site/theme.ts` | `site/` |
| API地址 | `api/backend.ts` | `api/` |
| 首页内容 | `pages/home.ts` | `pages/` |
| 攻略页配置 | `pages/strategy.ts` | `pages/` |
| 详情页布局 | `pages/detail.ts` | `pages/` |
| 导航菜单 | `site/site.ts` | `site/` |
| 多语言 | `site/locales.ts` | `site/` |

## 🐛 常见问题

### Q: 配置修改后不生效？

A: 
1. 检查是否正确导入配置
2. 清除 Next.js 缓存（删除 .next 目录）
3. 重启开发服务器

### Q: TypeScript 报错？

A:
1. 确认配置类型正确
2. 运行 `npm run type-check`
3. 查看 types.ts 中的类型定义

### Q: 如何添加新的配置项？

A:
1. 在 types.ts 中定义类型
2. 在对应文件中添加配置
3. 在 index.ts 中导出
4. 更新 README 文档

## 📚 相关文档

- [页面配置详细说明](./页面配置) ⭐
- [快速入门指南](./快速入门)
- [站点配置说明](./站点配置)
- [API配置说明](./API配置)
- 完整项目文档请查看 VitePress 文档站点首页

## 🤝 贡献指南

修改配置时请遵循：

1. 保持配置结构清晰
2. 添加完整的类型定义
3. 提供使用示例
4. 更新相关文档
5. 测试配置是否生效

## 📞 技术支持

如有问题，请：

1. 查看本文档和相关文档
2. 检查 TypeScript 类型提示
3. 查看控制台错误信息
4. 提交 Issue 或联系技术团队
