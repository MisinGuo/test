# å†…å®¹ä¸­å¿ƒå®æ–½æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•å°†åŸæœ‰çš„ `strategy` (æ”»ç•¥) å’Œ `article` (èµ„è®¯) è·¯ç”±åˆå¹¶ä¸ºç»Ÿä¸€çš„ `content` (å†…å®¹ä¸­å¿ƒ) æ¨¡å—ã€‚

## ğŸ¯ å®æ–½ç›®æ ‡

1. **ç»Ÿä¸€å†…å®¹ç®¡ç†**: å°†æ”»ç•¥ã€èµ„è®¯ã€è¯„æµ‹ç­‰å†…å®¹ç±»å‹ç»Ÿä¸€åˆ°ä¸€ä¸ªæ¨¡å—
2. **æ¿å—åŒ–åˆ†ç±»**: é€šè¿‡ `section` å­—æ®µåŒºåˆ†ä¸åŒç±»å‹çš„å†…å®¹
3. **ç®€åŒ–è·¯ç”±ç»“æ„**: ä½¿ç”¨ `/content` ç»Ÿä¸€å…¥å£
4. **ä¿æŒçµæ´»æ€§**: æ”¯æŒæŒ‰æ¿å—ç­›é€‰å’Œå±•ç¤º

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. å‰ç«¯é¡µé¢

#### `/src/app/[locale]/content/page.tsx`
- **åŠŸèƒ½**: å†…å®¹åˆ—è¡¨é¡µï¼Œæ”¯æŒæŒ‰æ¿å—ç­›é€‰
- **è·¯ç”±**: `/content` æˆ– `/content?section=guides`
- **ç‰¹ç‚¹**: 
  - æ¿å—æ ‡ç­¾å¯¼èˆª (å…¨éƒ¨/æ”»ç•¥/èµ„è®¯/è¯„æµ‹/ä¸“é¢˜)
  - æ”¯æŒç­›é€‰å’Œæ’åº
  - å¡ç‰‡å¼å±•ç¤º

#### `/src/app/[locale]/content/[slug]/page.tsx`
- **åŠŸèƒ½**: å†…å®¹è¯¦æƒ…é¡µ
- **è·¯ç”±**: `/content/{id}`
- **ç‰¹ç‚¹**: 
  - æ˜¾ç¤ºæ¿å—æ ‡ç­¾
  - ä¾§è¾¹æ æ˜¾ç¤ºç›¸å…³å†…å®¹
  - æ”¯æŒåˆ†äº«å’Œæ”¶è—

### 2. é…ç½®æ–‡ä»¶

#### `/src/config/pages/content.ts`
- **ContentSection æšä¸¾**: å®šä¹‰æ‰€æœ‰æ¿å—ç±»å‹
  ```typescript
  enum ContentSection {
    GUIDE_BEGINNER = 'guide_beginner',
    GUIDE_ADVANCED = 'guide_advanced',
    GUIDE_PVP = 'guide_pvp',
    GUIDE_LINEUP = 'guide_lineup',
    GUIDE_DEVELOPMENT = 'guide_development',
    NEWS_UPDATE = 'news_update',
    NEWS_EVENT = 'news_event',
    NEWS_INDUSTRY = 'news_industry',
    REVIEW = 'review',
    COMPARISON = 'comparison',
    TOPIC = 'topic',
  }
  ```

- **ContentGroups**: æ¿å—åˆ†ç»„
  - `guides`: æ‰€æœ‰æ”»ç•¥ç±»
  - `news`: æ‰€æœ‰èµ„è®¯ç±»
  - `reviews`: è¯„æµ‹ç±»
  - `topics`: ä¸“é¢˜ç±»

- **sectionConfig**: æ¯ä¸ªæ¿å—çš„æ˜¾ç¤ºé…ç½®(æ ‡ç­¾ã€æè¿°ã€å›¾æ ‡ã€é¢œè‰²)

#### APIç±»å‹æ›´æ–° (`/src/lib/api-types.ts`)
```typescript
export interface ArticleListParams extends LocalePaginationParams {
  categoryId?: number
  tagId?: number
  isTop?: string
  section?: string  // æ–°å¢ï¼šæ¿å—ç±»å‹ç­›é€‰
}
```

#### APIæ–¹æ³•æ›´æ–° (`/src/lib/api.ts`)
```typescript
// æ–°å¢æ–¹æ³•
static async getStrategyArticleDetail(id: number, locale?: string) {
  return request(`${apiEndpoints.strategies}/${id}`, {
    method: 'GET',
    params: prepareParams({ locale: getCurrentLocale(locale as any) }),
    next: { revalidate: 600 },
  })
}
```

## ğŸ”§ åç«¯éœ€è¦çš„æ”¹åŠ¨

### 1. æ•°æ®åº“è¡¨ç»“æ„

#### ä¿®æ”¹ `gb_article` è¡¨æˆ– `gb_strategy_article` è¡¨

```sql
-- æ·»åŠ æ¿å—å­—æ®µ
ALTER TABLE gb_strategy_article 
ADD COLUMN section VARCHAR(50) COMMENT 'å†…å®¹æ¿å—ç±»å‹: guide_beginner, news_update, reviewç­‰';

-- æ·»åŠ ç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢
CREATE INDEX idx_section ON gb_strategy_article(section);

-- æ›´æ–°ç°æœ‰æ•°æ®çš„æ¿å—åˆ†ç±»ï¼ˆç¤ºä¾‹ï¼‰
UPDATE gb_strategy_article 
SET section = 'guide_beginner' 
WHERE title LIKE '%æ–°æ‰‹%' OR title LIKE '%å…¥é—¨%';

UPDATE gb_strategy_article 
SET section = 'news_update' 
WHERE title LIKE '%ç‰ˆæœ¬%' OR title LIKE '%æ›´æ–°%';

UPDATE gb_strategy_article 
SET section = 'review' 
WHERE title LIKE '%è¯„æµ‹%' OR title LIKE '%æµ‹è¯„%';
```

### 2. åç«¯APIæ¥å£ä¿®æ”¹

#### Controllerå±‚

```java
/**
 * è·å–æ”»ç•¥æ–‡ç« åˆ—è¡¨
 * æ”¯æŒæŒ‰æ¿å—ç­›é€‰
 */
@GetMapping("/api/public/strategy-articles")
public TableDataInfo list(
    @RequestParam(required = false) String locale,
    @RequestParam(required = false) Long categoryId,
    @RequestParam(required = false) String section,  // æ–°å¢ï¼šæ¿å—å‚æ•°
    @RequestParam(defaultValue = "1") Integer pageNum,
    @RequestParam(defaultValue = "10") Integer pageSize
) {
    startPage();
    
    // æ„å»ºæŸ¥è¯¢æ¡ä»¶
    Map<String, Object> params = new HashMap<>();
    if (StringUtils.isNotEmpty(section)) {
        params.put("section", section);
    }
    if (categoryId != null) {
        params.put("categoryId", categoryId);
    }
    if (StringUtils.isNotEmpty(locale)) {
        params.put("locale", locale);
    }
    
    List<StrategyArticle> list = strategyArticleService.selectArticleList(params);
    return getDataTable(list);
}

/**
 * è·å–æ”»ç•¥æ–‡ç« è¯¦æƒ…
 */
@GetMapping("/api/public/strategy-articles/{id}")
public AjaxResult getDetail(
    @PathVariable Long id,
    @RequestParam(required = false) String locale
) {
    StrategyArticle article = strategyArticleService.selectArticleById(id, locale);
    return AjaxResult.success(article);
}
```

#### Serviceå±‚

```java
/**
 * æŸ¥è¯¢æ”»ç•¥æ–‡ç« åˆ—è¡¨
 */
List<StrategyArticle> selectArticleList(Map<String, Object> params);
```

#### Mapperå±‚

```xml
<select id="selectArticleList" parameterType="map" resultMap="StrategyArticleResult">
    SELECT * FROM gb_strategy_article
    WHERE del_flag = '0'
    <if test="section != null and section != ''">
        AND section = #{section}
    </if>
    <if test="categoryId != null">
        AND category_id = #{categoryId}
    </if>
    <if test="locale != null and locale != ''">
        AND (locale = #{locale} OR locale IS NULL)
    </if>
    ORDER BY create_time DESC
</select>
```

## ğŸ“Š æ¿å—ç±»å‹è¯´æ˜

### æ”»ç•¥ç±» (Guides)

| Sectionå€¼ | ä¸­æ–‡åç§° | è¯´æ˜ | ç¤ºä¾‹ |
|-----------|---------|------|------|
| `guide_beginner` | æ–°æ‰‹æ”»ç•¥ | ä»é›¶å¼€å§‹çš„åŸºç¡€æ•™ç¨‹ | "XXæ¸¸æˆæ–°æ‰‹å…¥é—¨æŒ‡å—" |
| `guide_advanced` | è¿›é˜¶æ”»ç•¥ | æ·±åº¦ç©æ³•å’Œé«˜é˜¶æŠ€å·§ | "XXæ¸¸æˆè¿›é˜¶å…»æˆæ”»ç•¥" |
| `guide_pvp` | PVPæ”»ç•¥ | ç«æŠ€å¯¹æˆ˜ç›¸å…³ | "XXæ¸¸æˆç«æŠ€åœºä¸Šåˆ†æ”»ç•¥" |
| `guide_lineup` | é˜µå®¹æ”»ç•¥ | è§’è‰²æ­é…å’Œå›¢é˜Ÿç»„å»º | "XXæ¸¸æˆæœ€å¼ºé˜µå®¹æ¨è" |
| `guide_development` | å…»æˆæ”»ç•¥ | è§’è‰²åŸ¹å…»å’Œèµ„æºè§„åˆ’ | "XXæ¸¸æˆè§’è‰²å…»æˆè·¯çº¿" |

### èµ„è®¯ç±» (News)

| Sectionå€¼ | ä¸­æ–‡åç§° | è¯´æ˜ | ç¤ºä¾‹ |
|-----------|---------|------|------|
| `news_update` | ç‰ˆæœ¬æ›´æ–° | æ¸¸æˆç‰ˆæœ¬æ›´æ–°å†…å®¹ | "XXæ¸¸æˆv2.0ç‰ˆæœ¬æ›´æ–°è§£è¯»" |
| `news_event` | æ´»åŠ¨èµ„è®¯ | é™æ—¶æ´»åŠ¨å’Œç¦åˆ© | "XXæ¸¸æˆæ˜¥èŠ‚æ´»åŠ¨æ”»ç•¥" |
| `news_industry` | è¡Œä¸šåŠ¨æ€ | æ¸¸æˆè¡Œä¸šæ–°é—» | "2024å¹´æ‰‹æ¸¸å¸‚åœºè¶‹åŠ¿" |

### è¯„æµ‹ç±» (Reviews)

| Sectionå€¼ | ä¸­æ–‡åç§° | è¯´æ˜ | ç¤ºä¾‹ |
|-----------|---------|------|------|
| `review` | æ¸¸æˆè¯„æµ‹ | å•ä¸ªæ¸¸æˆçš„æ·±åº¦è¯„æµ‹ | "XXä»™ä¾ æ¸¸æˆæ·±åº¦è¯„æµ‹" |
| `comparison` | æ¨ªå‘å¯¹æ¯” | å¤šä¸ªæ¸¸æˆçš„å¯¹æ¯”åˆ†æ | "ä¸‰å¤§ä»™ä¾ æ‰‹æ¸¸å¯¹æ¯”" |

### ä¸“é¢˜ç±» (Topics)

| Sectionå€¼ | ä¸­æ–‡åç§° | è¯´æ˜ | ç¤ºä¾‹ |
|-----------|---------|------|------|
| `topic` | ä¸“é¢˜åˆé›† | ä¸»é¢˜å¼å†…å®¹åˆé›† | "é›¶æ°ªç©å®¶å¿…ç©æ¸¸æˆæ¨è" |

## ğŸ”„ è¿ç§»å»ºè®®

### ä»æ—§è·¯ç”±åˆ°æ–°è·¯ç”±

#### åŸæœ‰è·¯ç”±ä¿æŒå…¼å®¹
```typescript
// å¯é€‰ï¼šä¿ç•™æ—§è·¯ç”±ä½œä¸ºé‡å®šå‘
// /src/app/[locale]/strategy/page.tsx
import { redirect } from 'next/navigation'

export default function StrategyPage({ params }: any) {
  redirect(`/${params.locale}/content?section=guides`)
}

// /src/app/[locale]/article/page.tsx
export default function ArticlePage({ params }: any) {
  redirect(`/${params.locale}/content?section=news`)
}
```

### æ•°æ®è¿ç§»æ­¥éª¤

1. **æ·»åŠ sectionå­—æ®µ**: åœ¨æ•°æ®åº“è¡¨ä¸­æ·»åŠ å­—æ®µ
2. **æ‰¹é‡æ ‡è®°ç°æœ‰æ•°æ®**: æ ¹æ®æ ‡é¢˜å…³é”®è¯è‡ªåŠ¨åˆ†ç±»
3. **æ‰‹å·¥å®¡æ ¸**: æ£€æŸ¥é‡è¦æ–‡ç« çš„åˆ†ç±»æ˜¯å¦æ­£ç¡®
4. **å‰ç«¯æµ‹è¯•**: æµ‹è¯•å„ä¸ªæ¿å—çš„ç­›é€‰åŠŸèƒ½
5. **é€æ­¥åˆ‡æ¢**: å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ï¼Œå†ä¸Šç”Ÿäº§

## ğŸ¨ å‰ç«¯ä½¿ç”¨ç¤ºä¾‹

### æ¿å—ç­›é€‰é“¾æ¥

```tsx
// æ˜¾ç¤ºæ‰€æœ‰å†…å®¹
<Link href="/content">å…¨éƒ¨å†…å®¹</Link>

// æ˜¾ç¤ºæ”»ç•¥ç±»å†…å®¹
<Link href="/content?section=guides">æ”»ç•¥</Link>

// æ˜¾ç¤ºèµ„è®¯ç±»å†…å®¹
<Link href="/content?section=news">èµ„è®¯</Link>

// æ˜¾ç¤ºå…·ä½“æ¿å—
<Link href="/content?section=guide_beginner">æ–°æ‰‹æ”»ç•¥</Link>
<Link href="/content?section=news_update">ç‰ˆæœ¬æ›´æ–°</Link>
```

### åœ¨å…¶ä»–é¡µé¢å¼•ç”¨å†…å®¹

```tsx
// æ¸¸æˆè¯¦æƒ…é¡µæ˜¾ç¤ºç›¸å…³æ”»ç•¥
<Link href={`/content?game=${gameId}&section=guides`}>
  æŸ¥çœ‹æ”»ç•¥
</Link>

// é¦–é¡µå±•ç¤ºæœ€æ–°å†…å®¹
<Link href="/content?sort=latest">
  æœ€æ–°å†…å®¹
</Link>
```

## ğŸš€ åç»­æ‰©å±•

### 1. æ›´å¤šæ¿å—ç±»å‹

å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šæ¿å—:
```typescript
enum ContentSection {
  // ... ç°æœ‰æ¿å—
  GUIDE_QUEST = 'guide_quest',        // ä»»åŠ¡æ”»ç•¥
  GUIDE_BOSS = 'guide_boss',          // Bossæ”»ç•¥
  NEWS_PATCH = 'news_patch',          // è¡¥ä¸è¯´æ˜
  REVIEW_VIDEO = 'review_video',      // è§†é¢‘è¯„æµ‹
  // ...
}
```

### 2. æ¿å—æƒé™æ§åˆ¶

```sql
-- æ·»åŠ æ¿å—çŠ¶æ€å­—æ®µ
ALTER TABLE gb_strategy_article 
ADD COLUMN section_status TINYINT DEFAULT 1 COMMENT 'æ¿å—å‘å¸ƒçŠ¶æ€ï¼š0=è‰ç¨¿ 1=å·²å‘å¸ƒ';
```

### 3. æ¿å—ç»Ÿè®¡

```sql
-- ç»Ÿè®¡å„æ¿å—æ–‡ç« æ•°é‡
SELECT 
  section,
  COUNT(*) as article_count,
  SUM(view_count) as total_views
FROM gb_strategy_article
WHERE del_flag = '0'
GROUP BY section
ORDER BY article_count DESC;
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **sectionå­—æ®µä¸ºå¯é€‰**: å¦‚æœæ–‡ç« æ²¡æœ‰è®¾ç½®sectionï¼Œä¼šæ˜¾ç¤ºåœ¨"å…¨éƒ¨"æ ‡ç­¾ä¸‹
2. **å‘åå…¼å®¹**: ç°æœ‰çš„æ”»ç•¥APIä»ç„¶æ­£å¸¸å·¥ä½œï¼Œæ–°å¢sectionå‚æ•°ä¸ºå¯é€‰
3. **SEOä¼˜åŒ–**: æ¯ä¸ªæ¿å—éƒ½æœ‰ç‹¬ç«‹çš„URLï¼Œæœ‰åˆ©äºSEO
4. **æ€§èƒ½ä¼˜åŒ–**: sectionå­—æ®µå»ºè®®æ·»åŠ ç´¢å¼•

## âœ… éªŒæ”¶æ¸…å•

- [ ] æ•°æ®åº“æ·»åŠ sectionå­—æ®µ
- [ ] åç«¯APIæ”¯æŒsectionå‚æ•°ç­›é€‰
- [ ] å‰ç«¯å†…å®¹åˆ—è¡¨é¡µæ­£å¸¸æ˜¾ç¤º
- [ ] æ¿å—æ ‡ç­¾å¯¼èˆªæ­£å¸¸å·¥ä½œ
- [ ] å†…å®¹è¯¦æƒ…é¡µæ˜¾ç¤ºæ¿å—æ ‡ç­¾
- [ ] ç°æœ‰æ•°æ®æ­£ç¡®è¿ç§»å’Œåˆ†ç±»
- [ ] å¤šè¯­è¨€æ”¯æŒæ­£å¸¸
- [ ] SEOå…ƒæ•°æ®æ­£ç¡®ç”Ÿæˆ

## ğŸ”— ç›¸å…³æ–‡ä»¶

- å‰ç«¯é…ç½®: `/src/config/pages/content.ts`
- åˆ—è¡¨é¡µé¢: `/src/app/[locale]/content/page.tsx`
- è¯¦æƒ…é¡µé¢: `/src/app/[locale]/content/[slug]/page.tsx`
- APIç±»å‹: `/src/lib/api-types.ts`
- APIå®¢æˆ·ç«¯: `/src/lib/api.ts`
- å¤šè¯­è¨€é…ç½®: `/src/config/site/locales.ts`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹:
1. æ§åˆ¶å°æ—¥å¿—: APIè¯·æ±‚å’Œå“åº”
2. Networké¢æ¿: æ£€æŸ¥APIè°ƒç”¨
3. æ•°æ®åº“æ—¥å¿—: æ£€æŸ¥SQLæ‰§è¡Œ

---

*æœ€åæ›´æ–°: 2026-01-22*
